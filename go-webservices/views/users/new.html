<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>API Interface</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/resources/style.css">
		<script src="/resources/script.js"></script>
	</head>
	<body>
<div class="container">

	<div class="row">
	<div class="col-12-lg">

		<h1>API Interface</h1>
		<div class="alert alert-warning" id="api-messages" role="alert">That email already exists!</div>

		<ul class="nav nav-tabs" role="tablist">
			<li class="active"><a href="#create" role="tab" data-toggle="tab">Create User</a></li>
		</ul>


		<div class="tab-content">
			<div class="tab-pane active" id="create">
			<form onsubmit="return false;">
			<div class="form-group">
			<label for="createEmail">Email</label>
			<input type="text" class="form-control" name="email" id="createEmail" placeholder="Enter email">
			</div>
			<div class="form-group">
			<label for="createUsername">Username</label>
			<input type="text" class="form-control" name="user" id="createUsername" placeholder="Enter username">
			</div>
			<div class="form-group">
			<label for="createFirst">First Name</label>
			<input type="text" class="form-control" name="first" id="createFirst" placeholder="First Name">
			</div>
			<div class="form-group">
			<label for="createLast">Last Name</label>
			<input type="text" class="form-control" name="last" id="createLast" placeholder="Last Name">
			</div>
			<div class="form-group">
			<label for="createLast">Image</label>
			<input type="file" class="form-control" name="image" id="createImage" placeholder="Image">
			</div>
			<button type="submit" onclick="userCreate();" class="btn btn-success">Create</button>
			</form>
			</div>

		</div>
	</div>
	</div>

	</div>
	<script>

	function userCreate() {
		action = "http://192.168.99.100:3000/api/users";
		postData = {};
		postData.email 	= $('#createEmail').val();
		postData.user 	= $('#createUsername').val();
		postData.first 	= $('#createFirst').val();
		postData.last 	= $('#createLast').val();

		var formData = new FormData($('form')[0]);
		$.ajax({

				url: action,
				type: 'POST',
				xhr: function() {
					var myXhr = $.ajaxSettings.xhr();
					if(myXhr.upload){
					}
					return myXhr;
				},
				//Ajax events
				beforeSend: function() {},
				success: function(data) {
					responseJSON = JSON.parse(data);
					console.log(responseJSON);
					if (responseJSON.Error != '') {
                 		alert(responseJSON.Error);
					} else {
					 	alert('yay'); 
					}
			    },
				error: function(data) {
					console.log(data);
					alert('nope');
				},
				// Form data
				data: formData,
				//Options to tell jQuery not to process data or worry about content-type.
				cache: false,
				contentType: false,
				processData: false
			});

	}

	$(document).ready(function() {
		//$('.alert').alert('close');
	});

	
	</script>
	</body>
</html>
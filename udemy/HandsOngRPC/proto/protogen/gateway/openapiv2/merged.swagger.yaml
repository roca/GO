swagger: "2.0"
info:
  title: Course - Protobuf & gRPC
  version: 1.0.0
tags:
  - name: ResiliencyService
  - name: HelloService
  - name: BankService
    description: Documentation for bank service
host: localhost:8081
schemes:
  - http
consumes:
  - application/json
produces:
  - application/json
paths:
  /api/resiliency/v1/metadata/bidirectional_streaming:
    post:
      operationId: ResiliencyService_BidirectionalResiliencyStream
      responses:
        "200":
          description: A successful response.(streaming responses)
          schema:
            type: object
            properties:
              result:
                $ref: '#/definitions/resiliencyResiliencyResponse'
              error:
                $ref: '#/definitions/rpcStatus'
            title: Stream result of resiliencyResiliencyResponse
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: ' (streaming inputs)'
          in: body
          required: true
          schema:
            $ref: '#/definitions/resiliencyResiliencyRequest'
      tags:
        - ResiliencyService
  /api/resiliency/v1/metadata/client_streaming:
    post:
      operationId: ResiliencyService_SendResiliencyStream
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/resiliencyResiliencyResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: ' (streaming inputs)'
          in: body
          required: true
          schema:
            $ref: '#/definitions/resiliencyResiliencyRequest'
      tags:
        - ResiliencyService
  /api/resiliency/v1/metadata/server_streaming:
    post:
      operationId: ResiliencyService_GetResiliencyStream
      responses:
        "200":
          description: A successful response.(streaming responses)
          schema:
            type: object
            properties:
              result:
                $ref: '#/definitions/resiliencyResiliencyResponse'
              error:
                $ref: '#/definitions/rpcStatus'
            title: Stream result of resiliencyResiliencyResponse
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/resiliencyResiliencyRequest'
      tags:
        - ResiliencyService
  /api/resiliency/v1/metadata/unary:
    post:
      operationId: ResiliencyService_GetResiliency
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/resiliencyResiliencyResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/resiliencyResiliencyRequest'
      tags:
        - ResiliencyService
  /bank.BankService/GetCurrentBalanceWithStatus:
    post:
      operationId: BankService_GetCurrentBalanceWithStatus
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/bankCurrentBalanceResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: Description for CurrentBalanceRequest
          in: body
          required: true
          schema:
            $ref: '#/definitions/bankCurrentBalanceRequest'
      tags:
        - BankService
  /bank/v1/account:
    post:
      operationId: BankService_CreateAccount
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/bankCreateAccountResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/bankCreateAccountRequest'
      tags:
        - BankService
  /bank/v1/account/current_balance:
    get:
      summary: Summary for GetCurrentBalance
      description: Description for GetCurrentBalance
      operationId: BankService_GetCurrentBalance
      responses:
        "200":
          description: Return current account balance
          schema:
            $ref: '#/definitions/bankCurrentBalanceResponse'
        "400":
          description: Returned when given account number is not exists
          schema: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: account_number
          description: Account number to get the balance
          in: query
          required: false
          type: string
      tags:
        - BankService
  /bank/v1/exchange_rates:
    get:
      summary: Summary for FetchExchangeRates
      description: Description for FetchExchangeRates
      operationId: BankService_FetchExchangeRates
      responses:
        "200":
          description: Stream exchange rate for given currency pair
          schema:
            type: object
            properties:
              result:
                $ref: '#/definitions/bankExchangeRateResponse'
              error:
                $ref: '#/definitions/rpcStatus'
            title: Stream result of bankExchangeRateResponse
        "400":
          description: Returned when given currency pair is not exists
          schema: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: from_currency
          description: Exchange rate from currency
          in: query
          required: false
          type: string
        - name: to_currency
          description: Exchange rate to currency
          in: query
          required: false
          type: string
      tags:
        - BankService
  /bank/v1/transaction/summarize:
    post:
      operationId: BankService_SummarizeTransactions
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/bankTransactionSummary'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: ' (streaming inputs)'
          in: body
          required: true
          schema:
            $ref: '#/definitions/bankTransaction'
      tags:
        - BankService
  /bank/v1/transaction/transfer_multiple:
    post:
      operationId: BankService_TransferMultiple
      responses:
        "200":
          description: A successful response.(streaming responses)
          schema:
            type: object
            properties:
              result:
                $ref: '#/definitions/bankTransferResponse'
              error:
                $ref: '#/definitions/rpcStatus'
            title: Stream result of bankTransferResponse
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: ' (streaming inputs)'
          in: body
          required: true
          schema:
            $ref: '#/definitions/bankTransferRequest'
      tags:
        - BankService
  /hello.HelloService/SayHello:
    post:
      operationId: HelloService_SayHello
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/helloHelloResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/helloHelloRequest'
      tags:
        - HelloService
  /hello.HelloService/SayHelloContinuous:
    post:
      operationId: HelloService_SayHelloContinuous
      responses:
        "200":
          description: A successful response.(streaming responses)
          schema:
            type: object
            properties:
              result:
                $ref: '#/definitions/helloHelloResponse'
              error:
                $ref: '#/definitions/rpcStatus'
            title: Stream result of helloHelloResponse
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: ' (streaming inputs)'
          in: body
          required: true
          schema:
            $ref: '#/definitions/helloHelloRequest'
      tags:
        - HelloService
  /hello.HelloService/SayHelloToEveryone:
    post:
      operationId: HelloService_SayHelloToEveryone
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/helloHelloResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: ' (streaming inputs)'
          in: body
          required: true
          schema:
            $ref: '#/definitions/helloHelloRequest'
      tags:
        - HelloService
  /hello.HelloService/SayManyHellos:
    post:
      operationId: HelloService_SayManyHellos
      responses:
        "200":
          description: A successful response.(streaming responses)
          schema:
            type: object
            properties:
              result:
                $ref: '#/definitions/helloHelloResponse'
              error:
                $ref: '#/definitions/rpcStatus'
            title: Stream result of helloHelloResponse
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/helloHelloRequest'
      tags:
        - HelloService
definitions:
  bankCreateAccountRequest:
    type: object
    properties:
      account_name:
        type: string
      currency:
        type: string
      initial_deposit_amount:
        type: number
        format: double
  bankCreateAccountResponse:
    type: object
    properties:
      account_uuid:
        type: string
  bankCurrentBalanceRequest:
    type: object
    properties:
      account_number:
        type: string
        description: Account number to get the balance
    description: Description for CurrentBalanceRequest
  bankCurrentBalanceResponse:
    type: object
    properties:
      current_balance:
        type: number
        format: double
        example: 2593
        description: Account's current balance
      current_date:
        $ref: '#/definitions/typeDate'
        description: Current date
    description: Description for CurrentBalanceResponse
  bankExchangeRateResponse:
    type: object
    properties:
      from_currency:
        type: string
        example: USD
        description: Exchange rate from currency
      to_currency:
        type: string
        example: IDR
        description: Exchange rate to currency
      rate:
        type: number
        format: double
        description: Exchange rate at particular timestamp
      timestamp:
        type: string
        description: Current timestamp
  bankTransaction:
    type: object
    properties:
      account_number:
        type: string
      transaction_type:
        $ref: '#/definitions/bankTransactionType'
      amount:
        type: number
        format: double
      timestamp:
        $ref: '#/definitions/typeDate'
  bankTransactionSummary:
    type: object
    properties:
      account_number:
        type: string
      balance:
        type: number
        format: double
      transactions:
        type: array
        items:
          type: object
          $ref: '#/definitions/bankTransaction'
  bankTransactionType:
    type: string
    enum:
      - TRANSACTION_TYPE_UNSPECIFIED
      - TRANSACTION_TYPE_DEPOSIT
      - TRANSACTION_TYPE_WITHDRAWAL
    default: TRANSACTION_TYPE_UNSPECIFIED
  bankTransferRequest:
    type: object
    properties:
      from_account_number:
        type: string
      to_account_number:
        type: string
      currency:
        type: string
      amount:
        type: number
        format: double
  bankTransferResponse:
    type: object
    properties:
      from_account_number:
        type: string
      to_account_number:
        type: string
      currency:
        type: string
      amount:
        type: number
        format: double
      transfer_status:
        $ref: '#/definitions/bankTransferStatusType'
      transfer_timestamp:
        $ref: '#/definitions/typeDate'
  bankTransferStatusType:
    type: string
    enum:
      - TRANSFER_STATUS_UNSPECIFIED
      - TRANSFER_STATUS_SUCCESS
      - TRANSFER_STATUS_FAILURE
    default: TRANSFER_STATUS_UNSPECIFIED
  helloHelloRequest:
    type: object
    properties:
      name:
        type: string
      age:
        type: integer
        format: int64
  helloHelloResponse:
    type: object
    properties:
      greet:
        type: string
  protobufAny:
    type: object
    properties:
      '@type':
        type: string
    additionalProperties: {}
  resiliencyResiliencyRequest:
    type: object
    properties:
      min_delay_second:
        type: integer
        format: int32
        example: 1
        description: Minimum delay in seconds
      max_delay_second:
        type: integer
        format: int32
        example: 1
        description: Maximum delay in seconds
      status_codes:
        type: array
        example: 200
        items:
          type: integer
          format: int64
        description: Status codes to return
  resiliencyResiliencyResponse:
    type: object
    properties:
      response:
        type: string
        example: 200
        description: Response
      status_code:
        type: integer
        format: int64
        example: 200
        description: Status code
  rpcStatus:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      details:
        type: array
        items:
          type: object
          $ref: '#/definitions/protobufAny'
  typeDate:
    type: object
    properties:
      year:
        type: integer
        format: int32
        description: |-
          Year of the date. Must be from 1 to 9999, or 0 to specify a date without
          a year.
      month:
        type: integer
        format: int32
        description: |-
          Month of a year. Must be from 1 to 12, or 0 to specify a year without a
          month and day.
      day:
        type: integer
        format: int32
        description: |-
          Day of a month. Must be from 1 to 31 and valid for the year and month, or 0
          to specify a year by itself or a year and month where the day isn't
          significant.
    description: |-
      * A full date, with non-zero year, month, and day values
      * A month and day value, with a zero year, such as an anniversary
      * A year on its own, with zero month and day values
      * A year and month value, with a zero day, such as a credit card expiration
      date

      Related types are [google.type.TimeOfDay][google.type.TimeOfDay] and
      `google.protobuf.Timestamp`.
    title: |-
      Represents a whole or partial calendar date, such as a birthday. The time of
      day and time zone are either specified elsewhere or are insignificant. The
      date is relative to the Gregorian Calendar. This can represent one of the
      following:
